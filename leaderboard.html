<head>
  <title>ladderboard · claim your victory</title>
    <link rel="stylesheet" href="./styles/font-awesome.min.css">
</head>

<body>
  <div class="outer">
    {{> leaderboard}}
  </div>
  <div class="outer">
    {{> gameboard}}
  </div>
  <div class="outer copyright">powered by <a href="https://github.com/palmerabollo/game-ladder">game-ladder</a></div>
</body>

<template name="leaderboard">
  <div class="header">
    {{loginButtons}}
  </div>
  
  <div class="leaderboard">
    {{#each players}}
      {{> player}}
    {{/each}}
  </div>
</template>

<template name="player">
  <div class="player {{selected}} {{ active }} {{ me }}">
    <span class="avatar">
      {{#if avatar_url}}
        <img class="avatar_img" src="{{avatar_url}}" />
      {{/if}}
    </span>
    <span class="name">{{name}}</span>
    <span class="score">{{score}}</span>

    <br />

    {{games_won}} won · {{games_lost}} lost ·

    {{#if humiliation_mode}}
      +{{points_scored}} -{{points_conceded}} ·
    {{/if}}

    <span class="inactive">
      {{#if date_lastgame}}last game {{timeago}}{{/if}}
    </span>

    {{#if selected}}
      {{#if currentUser}}
        {{#unless me}}
          <br />
          <a class="link victory" href="#">claim my victory</a>

          {{#if humiliation_mode}}
          ·
          <a class="link victory_advanced" href="#">optional info...</a>
          <span id="result_{{_id}}" class="hidden">
            <input type="text" size="2" maxlength="2" id="winner_points_{{_id}}" />
            -
            <input type="text" size="2" maxlength="2" id="loser_points_{{_id}}" />
          </span>
          {{/if}}
        {{/unless}}
      {{/if}}
    {{/if}}
  </div>
</template>

<template name="gameboard">
  <div class="gameboard">
    {{#each games}}
      {{> game}}<br />
    {{/each}}
  </div>
</template>

<template name="game">
  {{winner.name}} won {{loser.name}}
  <span class="gameinfo {{ bigwin }}">
    {{#if onfire}}<i class="icon-star onfire-icon"></i> · {{/if}}
    {{timeago}} · {{elodiff}} points
  </span>
</template>